basePath: /v1/schema/
consumes:
  - application/json
  - multipart/form-data
definitions:
  AppSchema:
    example:
      entities:
        - entity_attributes:
            - attribute_type:
                - http://blackswantechnologies.ai/bst-application-datamodel/AttributeType
                - http://blackswantechnologies.ai/bst-application-datamodel/SingleValuedProperty
              label: name
              range: http://www.w3.org/2001/XMLSchema#integer
              similarity_weight: 0.7
              vocabulary_references:
                - ''
                - ''
            - attribute_type:
                - http://blackswantechnologies.ai/bst-application-datamodel/AttributeType
                - http://blackswantechnologies.ai/bst-application-datamodel/SingleValuedProperty
              label: name
              range: http://www.w3.org/2001/XMLSchema#integer
              similarity_weight: 0.7
              vocabulary_references:
                - ''
                - ''
          label: Person
          similarity_measure_lambda_arn: arn:....
          similarity_measure_path: file://find_similarity.py
          similarity_measure_type: file_type
          vocabulary_references:
            - ''
            - ''
        - entity_attributes:
            - attribute_type:
                - http://blackswantechnologies.ai/bst-application-datamodel/AttributeType
                - http://blackswantechnologies.ai/bst-application-datamodel/SingleValuedProperty
              label: name
              range: http://www.w3.org/2001/XMLSchema#integer
              similarity_weight: 0.7
              vocabulary_references:
                - ''
                - ''
            - attribute_type:
                - http://blackswantechnologies.ai/bst-application-datamodel/AttributeType
                - http://blackswantechnologies.ai/bst-application-datamodel/SingleValuedProperty
              label: name
              range: http://www.w3.org/2001/XMLSchema#integer
              similarity_weight: 0.7
              vocabulary_references:
                - ''
                - ''
          label: Person
          similarity_measure_lambda_arn: arn:....
          similarity_measure_path: file://find_similarity.py
          similarity_measure_type: file_type
          vocabulary_references:
            - ''
            - ''
      relationships:
        - domain_includes:
            - ''
            - ''
          label: worksFor
          ranges_includes:
            - ''
            - ''
          relationship_attributes:
            - attribute_type:
                - http://blackswantechnologies.ai/bst-application-datamodel/AttributeType
                - http://blackswantechnologies.ai/bst-application-datamodel/SingleValuedProperty
              label: name
              range: http://www.w3.org/2001/XMLSchema#integer
              similarity_weight: 0.7
              vocabulary_references:
                - ''
                - ''
            - attribute_type:
                - http://blackswantechnologies.ai/bst-application-datamodel/AttributeType
                - http://blackswantechnologies.ai/bst-application-datamodel/SingleValuedProperty
              label: name
              range: http://www.w3.org/2001/XMLSchema#integer
              similarity_weight: 0.7
              vocabulary_references:
                - ''
                - ''
          vocabulary_references:
            - ''
            - ''
        - domain_includes:
            - ''
            - ''
          label: worksFor
          ranges_includes:
            - ''
            - ''
          relationship_attributes:
            - attribute_type:
                - http://blackswantechnologies.ai/bst-application-datamodel/AttributeType
                - http://blackswantechnologies.ai/bst-application-datamodel/SingleValuedProperty
              label: name
              range: http://www.w3.org/2001/XMLSchema#integer
              similarity_weight: 0.7
              vocabulary_references:
                - ''
                - ''
            - attribute_type:
                - http://blackswantechnologies.ai/bst-application-datamodel/AttributeType
                - http://blackswantechnologies.ai/bst-application-datamodel/SingleValuedProperty
              label: name
              range: http://www.w3.org/2001/XMLSchema#integer
              similarity_weight: 0.7
              vocabulary_references:
                - ''
                - ''
          vocabulary_references:
            - ''
            - ''
    properties:
      entities:
        description: all schema entities
        items:
          $ref: '#/definitions/Entity'
        type: array
      relationships:
        description: all schema relationships
        items:
          $ref: '#/definitions/Relationship'
        type: array
    type: object
  Attribute:
    example:
      attribute_type:
        - http://blackswantechnologies.ai/bst-application-datamodel/AttributeType
        - http://blackswantechnologies.ai/bst-application-datamodel/SingleValuedProperty
      label: name
      range: http://www.w3.org/2001/XMLSchema#integer
      similarity_weight: 0.7
      vocabulary_references:
        - ''
        - ''
    properties:
      attribute_type:
        description: array of attribute types
        example:
          - http://blackswantechnologies.ai/bst-application-datamodel/AttributeType
          - http://blackswantechnologies.ai/bst-application-datamodel/SingleValuedProperty
        items:
          type: string
        type: array
      label:
        example: name
        type: string
      mandatory:
        description: mandatory status of the attribute
        example: true
        type: boolean
      matching_method:
        example: com.bst.namematcher.v1
        type: string
      range:
        description: attribute range
        enum:
          - http://www.w3.org/2001/XMLSchema#integer
          - http://www.w3.org/2001/XMLSchema#string
          - http://www.w3.org/2001/XMLSchema#date
          - http://www.w3.org/2001/XMLSchema#decimal
          - http://www.w3.org/2001/XMLSchema#boolean
        example: http://www.w3.org/2001/XMLSchema#integer
        type: string
      vocabulary_references:
        items:
          $ref: '#/definitions/vocabulary_reference_attribute'
        type: array
      weight:
        description: weight in similarity calculation
        example: 0.7
        type: number
    required:
      - attribute_type
      - label
      - range
      - matching_method
    type: object
  AttributeMatchingMethod:
    properties:
      id:
        example: com.bst.namematcher.v1
        type: string
    required:
      - id
    type: object
  AttributeMatchingMethodDefinition:
    allOf:
      - $ref: '#/definitions/AttributeMatchingMethod'
      - $ref: '#/definitions/SimilarityMeasure'
      - $ref: '#/definitions/SimilarityType'
    properties:
      handler_class_name:
        example: ChineseNameMatcher
        type: string
    required:
      - handler_class_name
    type: object
  Entity:
    example:
      entity_attributes:
        - attribute_type:
            - http://blackswantechnologies.ai/bst-application-datamodel/AttributeType
            - http://blackswantechnologies.ai/bst-application-datamodel/SingleValuedProperty
          label: name
          range: http://www.w3.org/2001/XMLSchema#integer
          vocabulary_references:
            - ''
            - ''
          weight: 0.7
        - attribute_type:
            - http://blackswantechnologies.ai/bst-application-datamodel/AttributeType
            - http://blackswantechnologies.ai/bst-application-datamodel/SingleValuedProperty
          label: name
          range: http://www.w3.org/2001/XMLSchema#integer
          vocabulary_references:
            - ''
            - ''
          weight: 0.7
      label: Person
      vocabulary_references:
        - ''
        - ''
    properties:
      entity_attributes:
        items:
          $ref: '#/definitions/Attribute'
        type: array
      id_property_name:
        description: Similarity measure related
        example: identifiers
        minLength: 3
        type: string
      id_property_resolution_strategy:
        description: Similarity measure related
        example: any
        minLength: 3
        type: string
      label:
        description: label of entity
        example: Person
        type: string
      matching_method:
        description: In case of blackbox entity sm matching
        example: bst-bb-entity
        minLength: 3
        type: string
      vocabulary_references:
        items:
          $ref: '#/definitions/vocabulary_reference_entity'
        type: array
    required:
      - label
    type: object
  ReferenceType:
    properties:
      reference_type:
        description: reference type
        enum:
          - http://www.w3.org/2004/02/skos/core#exactMatch
          - http://www.w3.org/2004/02/skos/core#semanticRelation
        example: http://www.w3.org/2004/02/skos/core#exactMatch
        type: string
    type: object
  Relationship:
    example:
      domain_includes:
        - ''
        - ''
      label: worksFor
      ranges_includes:
        - ''
        - ''
      relationship_attributes:
        - attribute_type:
            - http://blackswantechnologies.ai/bst-application-datamodel/AttributeType
            - http://blackswantechnologies.ai/bst-application-datamodel/SingleValuedProperty
          label: name
          range: http://www.w3.org/2001/XMLSchema#integer
          similarity_weight: 0.7
          vocabulary_references:
            - ''
            - ''
        - attribute_type:
            - http://blackswantechnologies.ai/bst-application-datamodel/AttributeType
            - http://blackswantechnologies.ai/bst-application-datamodel/SingleValuedProperty
          label: name
          range: http://www.w3.org/2001/XMLSchema#integer
          similarity_weight: 0.7
          vocabulary_references:
            - ''
            - ''
      vocabulary_references:
        - ''
        - ''
    properties:
      domain_includes:
        items:
          example: ''
          type: string
        type: array
      label:
        description: label of relationship
        example: worksFor
        type: string
      ranges_includes:
        items:
          example: ''
          type: string
        type: array
      relationship_attributes:
        items:
          $ref: '#/definitions/Attribute'
        type: array
      vocabulary_references:
        items:
          $ref: '#/definitions/vocabulary_reference_relationship'
        type: array
    required:
      - label
    type: object
  SimilarityMeasure:
    example:
      file: file://Person.py
    properties:
      file:
        description: In case of python script file
        example: echo hello world
        minLength: 3
        type: string
    required:
      - file
    type: object
  SimilarityType:
    properties:
      similarity_type:
        enum:
          - whitebox
          - blackbox
        example: whitebox
        type: string
    type: object
  vocabulary_reference_attribute:
    allOf:
      - $ref: '#/definitions/ReferenceType'
    properties:
      reference_target:
        description: reference target from vocabulary
        example: https://blackswan-technologies.ai/vocabulary/LatinName
        type: string
  vocabulary_reference_entity:
    allOf:
      - $ref: '#/definitions/ReferenceType'
    properties:
      reference_target:
        description: 'reference target from vocabulary '
        example: http://schema.org/Person
        type: string
  vocabulary_reference_relationship:
    allOf:
      - $ref: '#/definitions/ReferenceType'
    properties:
      reference_target:
        description: 'reference target from vocabulary '
        example: http://schema.org/worksFor
        type: string
info:
  title: Falcon Schema
  version: 1.0.0
paths:
  /:
    delete:
      description: deleting and clearing all triple objects in db - temporary
      operationId: delete_all
      responses:
        '200':
          description: deleting all objects
      tags:
        - schema
      x-swagger-router-controller: falcon_schema.controllers.default_controller
    get:
      description: version info
      operationId: get_version_info
      responses:
        '200':
          description: version info
      tags:
        - schema
      x-swagger-router-controller: falcon_schema.controllers.default_controller
  /predefined/entities:
    get:
      description: get all predefined entities of schema.org
      operationId: get_all_predefined_schema_entities
      parameters:
        - description: client id - TODO should be taken from token
          in: header
          name: X_Client_ID
          required: true
          type: string
      responses:
        '200':
          description: all entities in schema
          schema:
            items:
              $ref: '#/definitions/Relationship'
            type: array
      tags:
        - schema
      x-swagger-router-controller: falcon_schema.controllers.default_controller
  /predefined/relations:
    get:
      description: get all predefined relations of schema.org
      operationId: get_all_predefined_schema_relations
      parameters:
        - description: client id - TODO should be taken from token
          in: header
          name: X_Client_ID
          required: true
          type: string
      responses:
        '200':
          description: all relations in schema
          schema:
            items:
              $ref: '#/definitions/Relationship'
            type: array
      tags:
        - schema
      x-swagger-router-controller: falcon_schema.controllers.default_controller
  /{app_id}/:
    delete:
      description: deleting and clearing all triple objects in db {app_id} namespace - temporary
      operationId: delete_all_namespace
      parameters:
        - description: client id - TODO should be taken from token
          in: header
          name: X_Client_ID
          required: true
          type: string
        - description: application id
          in: path
          name: app_id
          required: true
          type: string
      responses:
        '200':
          description: deleting all objects in the namespace
      tags:
        - schema
      x-swagger-router-controller: falcon_schema.controllers.default_controller
    get:
      description: get all schema objects
      operationId: get_all_schema_objects
      parameters:
        - description: client id - TODO should be taken from token
          in: header
          name: X_Client_ID
          required: true
          type: string
        - description: application id
          in: path
          name: app_id
          required: true
          type: string
        - description: format of the return
          in: query
          name: format
          required: false
          type: string
        - description: used for giving page number of predefined schemas
          in: query
          name: page
          required: false
          type: integer
        - description: getting the number of pages in pre defined schemas
          in: query
          name: pages
          required: false
          type: string
      responses:
        '200':
          description: all schema objects
          schema:
            $ref: '#/definitions/AppSchema'
      tags:
        - schema
      x-swagger-router-controller: falcon_schema.controllers.default_controller
  /{app_id}/attribute_matcher:
    get:
      description: get all attribute matchers per application
      operationId: get_all_attribute_matchers_per_application
      parameters:
        - description: client id - TODO should be taken from token
          in: header
          name: X_Client_ID
          required: true
          type: string
        - description: application id
          in: path
          name: app_id
          required: true
          type: string
        - description: type of SM to return
          in: query
          name: type
          required: false
          type: string
      responses:
        '200':
          description: all attribute matchers in schema
          schema:
            items:
              $ref: '#/definitions/AttributeMatchingMethod'
            type: array
      tags:
        - schema
      x-swagger-router-controller: falcon_schema.controllers.default_controller
    post:
      description: add attribute matching method
      operationId: add_attribute_matching_method
      parameters:
        - description: client id - TODO should be taken from token
          in: header
          name: X_Client_ID
          required: true
          type: string
        - description: application id
          in: path
          name: app_id
          required: true
          type: string
        - description: matcher to save
          in: body
          name: body
          required: true
          schema:
            $ref: '#/definitions/AttributeMatchingMethodDefinition'
      responses:
        '201':
          description: Accepted
        '400':
          description: Bad Request
      tags:
        - schema
      x-swagger-router-controller: falcon_schema.controllers.default_controller
  /{app_id}/attribute_matcher/{id}:
    delete:
      description: delete an attribute matcher in application
      operationId: delete_attribute_matcher_in_application
      parameters:
        - description: client id - TODO should be taken from token
          in: header
          name: X_Client_ID
          required: true
          type: string
        - description: application id
          in: path
          name: app_id
          required: true
          type: string
        - description: matcher to delete
          in: path
          name: id
          required: true
          type: string
      responses:
        '200':
          description: OK
      tags:
        - schema
      x-swagger-router-controller: falcon_schema.controllers.default_controller
  /{app_id}/entities:
    get:
      description: get all entities in schema
      operationId: get_all_entities_in_schema
      parameters:
        - description: client id - TODO should be taken from token
          in: header
          name: X_Client_ID
          required: true
          type: string
        - description: application id
          in: path
          name: app_id
          required: true
          type: string
        - description: format of the return
          in: query
          name: format
          required: false
          type: string
      responses:
        '200':
          description: all entities in schema
          schema:
            items:
              $ref: '#/definitions/Entity'
            type: array
      tags:
        - schema
      x-swagger-router-controller: falcon_schema.controllers.default_controller
  /{app_id}/entities/{entity_id}:
    delete:
      description: delete a schema entity
      operationId: delete_a_schema_entity
      parameters:
        - description: client id - TODO should be taken from token
          in: header
          name: X_Client_ID
          required: true
          type: string
        - description: application id
          in: path
          name: app_id
          required: true
          type: string
        - description: entity id for example Person, Organization
          in: path
          name: entity_id
          required: true
          type: string
      responses:
        '200':
          description: OK
      tags:
        - schema
      x-swagger-router-controller: falcon_schema.controllers.default_controller
    get:
      description: get specific entity in the schema
      operationId: get_specific_entity_in_the_schema
      parameters:
        - description: client id - TODO should be taken from token
          in: header
          name: X_Client_ID
          required: true
          type: string
        - description: application id
          in: path
          name: app_id
          required: true
          type: string
        - description: entity id for example Person, Organization
          in: path
          name: entity_id
          required: true
          type: string
        - description: format of the return
          in: query
          name: format
          required: false
          type: string
      responses:
        '200':
          description: specific entity in the schema
          schema:
            $ref: '#/definitions/Entity'
      tags:
        - schema
      x-swagger-router-controller: falcon_schema.controllers.default_controller
    post:
      description: create a schema entity
      operationId: create_a_schema_entity
      parameters:
        - description: client id - TODO should be taken from token
          in: header
          name: X_Client_ID
          required: true
          type: string
        - description: application id
          in: path
          name: app_id
          required: true
          type: string
        - description: entity E.g Person, Organization
          in: path
          name: entity_id
          required: true
          type: string
        - description: entity to save
          in: body
          name: body
          required: true
          schema:
            $ref: '#/definitions/Entity'
      responses:
        '201':
          description: Accepted
        '400':
          description: Bad Request
      tags:
        - schema
      x-swagger-router-controller: falcon_schema.controllers.default_controller
    put:
      description: update a schema entity
      operationId: update_specific_entity_for_app_schema
      parameters:
        - description: client id - TODO should be taken from token
          in: header
          name: X_Client_ID
          required: true
          type: string
        - description: application id
          in: path
          name: app_id
          required: true
          type: string
        - description: entity id for example Person, Organization
          in: path
          name: entity_id
          required: true
          type: string
        - description: entity to save
          in: body
          name: body
          required: true
          schema:
            $ref: '#/definitions/Entity'
      responses:
        '201':
          description: Accepted
        '400':
          description: Bad Request
      tags:
        - schema
      x-swagger-router-controller: falcon_schema.controllers.default_controller
  /{app_id}/relationships:
    get:
      description: get all relationships in schema
      operationId: get_all_relationships_in_schema
      parameters:
        - description: client id - TODO should be taken from token
          in: header
          name: X_Client_ID
          required: true
          type: string
        - description: application id
          in: path
          name: app_id
          required: true
          type: string
        - description: format of the return
          in: query
          name: format
          required: false
          type: string
      responses:
        '200':
          description: all entities in schema
          schema:
            items:
              $ref: '#/definitions/Relationship'
            type: array
      tags:
        - schema
      x-swagger-router-controller: falcon_schema.controllers.default_controller
  /{app_id}/relationships/{relationship_id}:
    delete:
      description: delete a schema relationship
      operationId: delete_a_schema_relationship
      parameters:
        - description: client id - TODO should be taken from token
          in: header
          name: X_Client_ID
          required: true
          type: string
        - description: application id
          in: path
          name: app_id
          required: true
          type: string
        - description: relationship id for example worksFor
          in: path
          name: relationship_id
          required: true
          type: string
      responses:
        '200':
          description: OK
      tags:
        - schema
      x-swagger-router-controller: falcon_schema.controllers.default_controller
    post:
      description: create a relationship
      operationId: create_a_relationship
      parameters:
        - description: client id - TODO should be taken from token
          in: header
          name: X_Client_ID
          required: true
          type: string
        - description: application id
          in: path
          name: app_id
          required: true
          type: string
        - description: relationship id for example worksFor
          in: path
          name: relationship_id
          required: true
          type: string
        - description: relationship to save
          in: body
          name: body
          required: true
          schema:
            $ref: '#/definitions/Relationship'
      responses:
        '201':
          description: Accepted
        '400':
          description: Bad Request
      tags:
        - schema
      x-swagger-router-controller: falcon_schema.controllers.default_controller
    put:
      description: update a schema relationship
      operationId: update_a_schema_relationship
      parameters:
        - description: client id - TODO should be taken from token
          in: header
          name: X_Client_ID
          required: true
          type: string
        - description: application id
          in: path
          name: app_id
          required: true
          type: string
        - description: relationship id for example worksFor
          in: path
          name: relationship_id
          required: true
          type: string
        - description: relationship to save
          in: body
          name: body
          required: true
          schema:
            $ref: '#/definitions/Relationship'
      responses:
        '201':
          description: Accepted
        '400':
          description: Bad Request
      tags:
        - schema
      x-swagger-router-controller: falcon_schema.controllers.default_controller
  /{app_id}/similarity_measure/{entity_id}:
    put:
      description: update a schema entity with similarity measure
      operationId: update_specific_entity_similarity_measure
      parameters:
        - description: client id - TODO should be taken from token
          in: header
          name: X_Client_ID
          required: true
          type: string
        - description: application id
          in: path
          name: app_id
          required: true
          type: string
        - description: entity id for example Person, Organization
          in: path
          name: entity_id
          required: true
          type: string
        - description: similarity measure file to store
          in: formData
          name: file
          type: file
        - description: similarity measure file to store
          in: formData
          name: similarity_measure_path
          required: true
          type: string
      responses:
        '200':
          description: OK
        '400':
          description: Bad Request
      tags:
        - schema
      x-swagger-router-controller: falcon_schema.controllers.default_controller
produces:
  - application/json
schemes:
  - http
  - https
security:
  - ApiKeyAuth: []
securityDefinitions:
  ApiKeyAuth:
    in: header
    name: token
    type: apiKey
    x-apikeyInfoFunc: falcon_schema.controllers.authorization_controller.check_ApiKeyAuth
swagger: '2.0'
